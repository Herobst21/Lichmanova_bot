[alembic]
script_location = app/migrations
# дефолтное значение — потом перепишется из env.py
sqlalchemy.url = postgresql+psycopg://app:app@db:5432/app

# ------------------------------------------------------------------------------
# ЛОГИРОВАНИЕ: включаем максимум детализации
# ------------------------------------------------------------------------------
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console,file

[formatters]
keys = detailed

[logger_root]
level = DEBUG
handlers = console,file

[logger_sqlalchemy]
level = INFO
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = DEBUG
handlers =
qualname = alembic

# вывод в консоль
[handler_console]
class = StreamHandler
args = (sys.stdout,)
level = DEBUG
formatter = detailed

# дублирование в файл (будет писаться внутрь контейнера)
[handler_file]
class = FileHandler
args = ('/tmp/alembic_debug.log', 'w')
level = DEBUG
formatter = detailed

# единый формат вывода
[formatter_detailed]
format = %(asctime)s | %(levelname)s | %(name)s | %(message)s
datefmt = %Y-%m-%d %H:%M:%S
